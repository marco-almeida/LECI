-- Stand--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATE TABLE STANDAUTO (
ID_Stand INTEGER,
PRIMARY KEY(ID_Stand),

Pais CHAR,
Endereco CHAR,
Email CHAR,
Telefone CHAR,
CodigoPostal CHAR,
);

-- Funcionario--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATE TABLE FUNCIONARIO(
ID_Funcionario INTEGER,
PRIMARY KEY(ID_Funcionario),

Nome CHAR,
Email CHAR,
Telefone CHAR,
Endereco CHAR,

StandAuto INTEGER,
);
ALTER TABLE FUNCIONARIO ADD CONSTRAINT FK_FUNC_STAND_ID FOREIGN KEY (StandAuto) REFERENCES STANDAUTO(ID_Stand);

CREATE TABLE VENDEDOR(
ID_Vendedor INTEGER,
PRIMARY KEY(ID_Vendedor),

Num_Vendas INTEGER,
);
ALTER TABLE VENDEDOR ADD CONSTRAINT FK_VENDEDOR_ID FOREIGN KEY (ID_Vendedor) REFERENCES FUNCIONARIO(ID_Funcionario);

CREATE TABLE MECANICO(
ID_Mecanico INTEGER,
PRIMARY KEY(ID_Mecanico)
);
ALTER TABLE MECANICO ADD CONSTRAINT FK_MECANICO_ID FOREIGN KEY (ID_Mecanico) REFERENCES FUNCIONARIO(ID_Funcionario);

CREATE TABLE GERENTE(
ID_Gerente INTEGER,
PRIMARY KEY(ID_Gerente)
);
ALTER TABLE GERENTE ADD CONSTRAINT FK_GERENTE_ID FOREIGN KEY (ID_Gerente) REFERENCES FUNCIONARIO(ID_Funcionario);

CREATE TABLE CERTIFICACOES(
Certificacoes CHAR,
PRIMARY KEY(Certificacoes)
);

CREATE TABLE GERENTE_CERTIFICACOES(
Gerente INTEGER,
Certifics CHAR,
PRIMARY KEY(Gerente, Certifics)
);
ALTER TABLE GERENTE_CERTIFICACOES ADD CONSTRAINT FK_GC_GERENTE FOREIGN KEY (Gerente) REFERENCES GERENTE(ID_Gerente);
ALTER TABLE GERENTE_CERTIFICACOES ADD CONSTRAINT FK_GC_CERTIFICS FOREIGN KEY (Certifics) REFERENCES CERTIFICACOES(Certificacoes);

-- Veiculo---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATE TABLE VEICULO(
Matricula CHAR,
PRIMARY KEY (Matricula),

Marca CHAR,
Modelo CHAR,
Combustivel CHAR,
Potencia INTEGER,
Cilindrada INTEGER,
Ano INTEGER,
Quilometros INTEGER,
Condicao INTEGER,

StandAuto INTEGER
);
ALTER TABLE VEICULO ADD CONSTRAINT FK_VEICL_STAND_ID FOREIGN KEY (StandAuto) REFERENCES STANDAUTO(ID_Stand);

CREATE TABLE CARRO(
Matricula CHAR,
PRIMARY KEY(Matricula),

Portas INTEGER,
Lugares INTEGER,
Caixa CHAR
)
ALTER TABLE CARRO ADD CONSTRAINT FK_CARRO_MATRICULA FOREIGN KEY (Matricula) REFERENCES VEICULO(Matricula);

CREATE TABLE MOTA(
Matricula CHAR,
PRIMARY KEY(Matricula),
)
ALTER TABLE MOTA ADD CONSTRAINT FK_MOTA_MATRICULA FOREIGN KEY (Matricula) REFERENCES VEICULO(Matricula);

--Cliente--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATE TABLE CLIENTE(
NIF INTEGER,
PRIMARY KEY(NIF),

Nome CHAR,
Telefone INTEGER,
Email CHAR
);

--OPEREACOES CLIENTE--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
CREATE TABLE ALUGUER(
Cliente INTEGER,
Veiculo CHAR,
Data_Inicio DATE,
PRIMARY KEY(Cliente,Veiculo,Data_inicio),
Data_Fim DATE,
Montante INTEGER
);
ALTER TABLE ALUGUER ADD CONSTRAINT FK_ALUGUER_CLIENTE FOREIGN KEY(Cliente) REFERENCES CLIENTE(NIF);
ALTER TABLE ALUGUER ADD CONSTRAINT FK_ALUGUER_VEICULO FOREIGN KEY(Veiculo) REFERENCES VEICULO(Matricula);

CREATE TABLE VENDA(
Cliente INTEGER,
Veiculo CHAR,
Data_Venda DATE,
PRIMARY KEY(Cliente,Veiculo,Data_Venda),
Vendedor INTEGER,
Montante INTEGER,
Opcoes_Pagamento CHAR
);
ALTER TABLE VENDA ADD CONSTRAINT FK_VENDA_CLIENTE FOREIGN KEY(Cliente) REFERENCES CLIENTE(NIF);
ALTER TABLE VENDA ADD CONSTRAINT FK_VENDA_VEICULO FOREIGN KEY(Veiculo) REFERENCES VEICULO(Matricula);
ALTER TABLE VENDA ADD CONSTRAINT FK_VENDA_VENDEDOR FOREIGN KEY(Vendedor) REFERENCES VENDEDOR(ID_Vendedor);

CREATE TABLE COMPRA_CLIENTE(
Cliente INTEGER,
Veiculo CHAR,
Data_Compra DATE,
PRIMARY KEY(Cliente,Veiculo,Data_Compra),
Montante INTEGER
);
ALTER TABLE COMPRA_CLIENTE ADD CONSTRAINT FK_COMPRA_CLIENTE FOREIGN KEY(Cliente) REFERENCES CLIENTE(NIF);
ALTER TABLE COMPRA_CLIENTE ADD CONSTRAINT FK_COMPRA_VEICULO FOREIGN KEY(Veiculo) REFERENCES VEICULO(Matricula);

CREATE TABLE REPARACAO(
Cliente INTEGER,
Veiculo CHAR,
Data_Inicio DATE,
PRIMARY KEY(Cliente,Veiculo,Data_Inicio),
Data_Fim DATE,
Montante INTEGER
);
ALTER TABLE REPARACAO ADD CONSTRAINT FK_REPARACAO_CLIENTE FOREIGN KEY(Cliente) REFERENCES CLIENTE(NIF);
ALTER TABLE REPARACAO ADD CONSTRAINT FK_REPARACAO_VEICULO FOREIGN KEY(Veiculo) REFERENCES VEICULO(Matricula);


